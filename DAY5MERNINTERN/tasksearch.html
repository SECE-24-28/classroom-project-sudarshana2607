<!DOCTYPE html>
<html>
<head>
    <title>Fetch + Search</title>
</head>
<body>

    <h2>Click Fetch info to fetch the data</h2>

    <button id="bt" onclick="fetchRecords()">Fetch Info</button>

    <br><br>

    <input type="text" id="searchBox" placeholder="Search by name..." onkeyup="searchName()">

    <div id="main"></div>

    <script>

        let allUsers = []; 

        async function fetchRecords() {
            let res = await fetch("https://jsonplaceholder.typicode.com/users");
            let data = await res.json();

            allUsers = data;  
            displayUsers(allUsers);
        }

        function displayUsers(users) {
            let main = document.getElementById("main");
            main.innerHTML = "";

            users.forEach(obj => {
                let dv = document.createElement("div");
                dv.style.margin = "10px 0";
                dv.style.padding = "10px";
                dv.style.border = "1px solid black";

                dv.innerHTML = `
                    <b>${obj.name}</b><br>
                    ${obj.username}<br>
                    ${obj.email}
                `;
                main.appendChild(dv);
            });
        }

        function searchName() {
            let text = document.getElementById("searchBox").value.toLowerCase();

            let filtered = allUsers.filter(user =>
                user.name.toLowerCase().includes(text)
            );

            displayUsers(filtered);
        }

    </script>

</body>
</html>